package ow_elements;

import com.badlogic.gdx.scenes.scene2d.Stage;

import screens.OverWorldScreen;

public class NpcMovil extends Npc{

    private float velocidad;
    private int direccionMovimiento;
    private float tiempoAnimacion;
    
    public NpcMovil(float x, float y, Stage s, OverWorldScreen nivel, String animacion) {
        super(x,y,s,nivel);
        
        prepararAnimacion(animacion);
        direccionMovimiento=-1;
        this.setPolygon(8, 32, 23, 5, 5);
        
        velocidad=70;
        tiempoAnimacion = 0;
    }
    
    public void act(float delta) {
        super.act(delta);
        tiempoAnimacion += delta;
        moveBy(direccionMovimiento*velocidad*delta,0);
        animaciones();
        comprobarColisiones();
    }
    
    private void comprobarColisiones() {
        for(Solid solido:this.nivel.solidos) {
            if(this.overlaps(solido)) {
                this.direccionMovimiento*=-1;
            }
        }
    }
    
    private void animaciones() {
        if (direccionMovimiento>0) {
            if (tiempoAnimacion >= 0.15f) {
                this.setAnimation(derecha);
                tiempoAnimacion = 0;
            }
        }
        else {
            if (tiempoAnimacion >= 0.15f) {
                this.setAnimation(izquierda);
                tiempoAnimacion = 0;
            }
        }
    }
}
