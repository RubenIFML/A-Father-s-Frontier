package ow_elements;

import com.badlogic.gdx.scenes.scene2d.Stage;

import screens.OverWorldScreen;

public class NpcMovil(float x, float y, Stage s, OverWorldScreen nivel, String animacion) {
    super(x,y,s,nivel);
    prepararAnimacion(animacion);
    direccionMovimiento=-1;
    this.setPolygon(8, 32, 23, 5, 5);
    velocidad=70;
}

public void act(float delta) {
    super.act(delta);
    moveBy(direccionMovimiento*velocidad*delta,0);
    animaciones();
    comprobarColisiones();
}

private void comprobarColisiones() {
    for(Solid solido:this.nivel.solidos) {
        if(this.overlaps(solido)) {
            this.direccionMovimiento*=-1;
        }
    }
}

private void animaciones() {
    if (direccionMovimiento > 0) {
        if (animacionActual != derecha) {
            this.setAnimation(derecha);
            animacionActual = derecha;
        }
    } else {
        if (animacionActual != izquierda) {
            this.setAnimation(izquierda);
            animacionActual = izquierda;
        }
    }
}
